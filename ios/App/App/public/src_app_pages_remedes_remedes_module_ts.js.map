{"version":3,"file":"src_app_pages_remedes_remedes_module_ts.js","mappings":"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","sources":["./src/app/pages/remedes/remedes.page.html","./src/app/pages/remedes/remedes-routing.module.ts","./src/app/pages/remedes/remedes.module.ts","./src/app/pages/remedes/remedes.page.ts"],"sourcesContent":["export default \"<ion-header class=\\\"ion-no-border bg_trans\\\">\\r\\n  <ion-toolbar color=\\\"cgreen\\\" class=\\\"bg_transp\\\" lines=\\\"none\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button defaultHref=\\\"\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>Ajout de Remèdes</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n\\r\\n  <form #data=\\\"ngForm\\\" (ngSubmit)=\\\"addRemede(data)\\\" enctype=\\\"multipart/form-data\\\">\\r\\n\\r\\n    <ion-item class=\\\"bg_transp ion-margin\\\" lines=\\\"none\\\">\\r\\n      <ion-label position=\\\"floating\\\">Choississez la categorie</ion-label>\\r\\n      <ion-select id=\\\"cim\\\" (ionChange)=\\\"cimChanged(data)\\\" name=\\\"cim\\\" ngModel required>\\r\\n        <ion-select-option *ngFor=\\\"let cim of cimList\\\" value=\\\"{{ cim[0] }}\\\">{{ cim[1]?.title }}\\r\\n        </ion-select-option>\\r\\n      </ion-select>\\r\\n    </ion-item>\\r\\n\\r\\n    <ion-item class=\\\"bg_transp ion-margin\\\" lines=\\\"none\\\" *ngIf=\\\"cimSelected\\\">\\r\\n      <ion-card-subtitle><strong>Vous avez choisi la categorie : </strong>\\r\\n        <p>{{ cimSelected }}</p>\\r\\n      </ion-card-subtitle>\\r\\n    </ion-item>\\r\\n\\r\\n    <ion-item class=\\\"bg_transp ion-margin\\\" lines=\\\"none\\\">\\r\\n      <ion-label position=\\\"floating\\\">Choississez la maladie</ion-label>\\r\\n      <ion-select id=\\\"child\\\" (ionChange)=\\\"childChanged(data)\\\" name=\\\"child\\\" ngModel required>\\r\\n        <ion-select-option *ngFor=\\\"let child of children\\\" value=\\\"{{ child[0] }}\\\">{{ child[1]?.title }}\\r\\n        </ion-select-option>\\r\\n      </ion-select>\\r\\n    </ion-item>\\r\\n\\r\\n    <ion-item class=\\\"bg_transp ion-margin\\\" lines=\\\"none\\\" *ngIf=\\\"illnessSelected\\\">\\r\\n      <ion-card-subtitle><strong>Vous avez choisi la maladie : </strong>\\r\\n        <p>{{ illnessSelected }}</p>\\r\\n      </ion-card-subtitle>\\r\\n    </ion-item>\\r\\n\\r\\n    <ion-item class=\\\"bg_transp ion-margin\\\" lines=\\\"none\\\">\\r\\n      <ion-label position=\\\"floating\\\">Nom</ion-label>\\r\\n      <ion-input type=\\\"text\\\" name=\\\"nom\\\" placeholder=\\\"Nom du médicament...\\\" maxlength=\\\"24\\\" ngModel required></ion-input>\\r\\n    </ion-item>\\r\\n\\r\\n    <ion-item class=\\\"bg_transp ion-margin\\\" lines=\\\"none\\\">\\r\\n      <ion-label position=\\\"floating\\\">Description</ion-label>\\r\\n      <ion-input type=\\\"text\\\" name=\\\"description\\\" placeholder=\\\"Mode d'emploi du medicament\\\" ngModel required></ion-input>\\r\\n    </ion-item>\\r\\n\\r\\n    <input id=\\\"imageInput\\\" class=\\\"ion-hide\\\" type=\\\"file\\\" accept=\\\"image/png, image/jpeg\\\" required>\\r\\n    <ion-button id=\\\"imageBtn\\\" class=\\\"ion-margin\\\" expand=\\\"block\\\" color=\\\"cgreen\\\">\\r\\n      <ion-icon name=\\\"camera\\\" class=\\\"ion-margin\\\"></ion-icon>\\r\\n      Image\\r\\n    </ion-button>\\r\\n    <input class=\\\"ion-hide\\\" id=\\\"audioInput\\\" type=\\\"file\\\" accept=\\\"audio/*\\\" required>\\r\\n    <ion-button id=\\\"audioBtn\\\" class=\\\"ion-margin\\\" expand=\\\"block\\\" color=\\\"cgreen\\\">\\r\\n      <ion-icon name=\\\"musical-notes-outline\\\" class=\\\"ion-margin\\\"></ion-icon>\\r\\n      Audio\\r\\n    </ion-button>\\r\\n    <ion-button class=\\\"ion-margin\\\" color=\\\"cgreen\\\" expand=\\\"block\\\" type=\\\"submit\\\">Publier</ion-button>\\r\\n    <ion-button class=\\\"ion-margin\\\" color=\\\"danger\\\" expand=\\\"block\\\" type=\\\"reset\\\">Annuler</ion-button>\\r\\n  </form>\\r\\n\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { RemedesPage } from './remedes.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: RemedesPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class RemedesPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { RemedesPageRoutingModule } from './remedes-routing.module';\r\n\r\nimport { RemedesPage } from './remedes.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RemedesPageRoutingModule\r\n  ],\r\n  declarations: [RemedesPage]\r\n})\r\nexport class RemedesPageModule {}\r\n","/* eslint-disable object-shorthand */\r\n/* eslint-disable @typescript-eslint/dot-notation */\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { LoadingController } from '@ionic/angular';\r\nimport { addDoc, collection, doc, getDoc, getDocs, getFirestore, orderBy, query, serverTimestamp, setDoc } from 'firebase/firestore';\r\nimport { getAuth } from 'firebase/auth';\r\nimport { getDownloadURL, getStorage, ref, uploadBytesResumable } from 'firebase/storage';\r\nimport { RemedeServiceService } from 'src/app/services/remede-service.service';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { PharmaServiceService } from '../../services/pharma-service.service';\r\n\r\n@Component({\r\n  selector: 'app-remedes',\r\n  templateUrl: './remedes.page.html',\r\n  styleUrls: ['./remedes.page.scss'],\r\n})\r\nexport class RemedesPage implements OnInit {\r\n\r\n  public cimList: any[] = [];\r\n  public children: any[] = [];\r\n  public cimSelected: string;\r\n  public illnessSelected: string;\r\n  public image: any;\r\n  public audio: any;\r\n  public ref: string[];\r\n  private cim: string;\r\n  private child: string;\r\n  constructor(\r\n    private appService: RemedeServiceService,\r\n    private pharmaService: PharmaServiceService,\r\n    private activeRoute: ActivatedRoute\r\n  ) { }\r\n\r\n  async ngOnInit() {\r\n    this.appService.presentLoadingDefault('Veuillez patienter...');\r\n    this.getCim();\r\n\r\n    try {\r\n      this.ref = JSON.parse(this.activeRoute.snapshot.paramMap.get('ref'));\r\n      this.cimSelected = await this.getCimValue(this.ref[0]);\r\n      this.illnessSelected = await this.getChildValue(this.ref[0], this.ref[1]);\r\n      this.cim = this.ref[0];\r\n      this.child = this.ref[1];\r\n    } catch (error) {}\r\n\r\n    const imageInput = document.getElementById('imageInput');\r\n    const imageBtn = document.getElementById('imageBtn');\r\n\r\n    imageBtn.addEventListener('click', (e) => {\r\n      e.preventDefault();\r\n      imageInput.click();\r\n    });\r\n\r\n    const audioInput = document.getElementById('audioInput');\r\n    const audioBtn = document.getElementById('audioBtn');\r\n    audioBtn.addEventListener('click', (e) => {\r\n      e.preventDefault();\r\n      audioInput.click();\r\n    });\r\n  }\r\n\r\n  public async getCimValue(uid: string) {\r\n    const docRef = getDoc(doc(getFirestore(), `CIM/${uid}`));\r\n    const result = (await docRef).data();\r\n    return result.title;\r\n  }\r\n\r\n  public async getChildValue(cim: string, child: string) {\r\n    const docRef = getDoc(doc(getFirestore(), `CIM/${cim}/Children/${child}`));\r\n    const result = (await docRef).data();\r\n    return result.title;\r\n  }\r\n\r\n  public async getCim() {\r\n    const q = query(collection(getFirestore(), 'CIM'), orderBy('chapitre'));\r\n    const querySnapshot = await getDocs(q);\r\n    querySnapshot.forEach((data) => {\r\n      this.cimList.push([data.id, data.data()]);\r\n    });\r\n    this.appService.dismissLoading();\r\n  }\r\n\r\n  public async cimChanged(data: any) {\r\n    this.cim = null;\r\n    this.child = null;\r\n    this.cimSelected = await this.getCimValue(data.value.cim);\r\n    const child = document.getElementById('child');\r\n    child.setAttribute('value', '');\r\n    this.appService.presentLoadingDefault('Veuillez patienter...');\r\n    this.getChildren(data.value.cim);\r\n  }\r\n\r\n  public async childChanged(data: any) {\r\n    this.cim = null;\r\n    this.child = null;\r\n    this.illnessSelected = await this.getChildValue(data.value.cim, data.value.child);\r\n  }\r\n\r\n  public async getChildren(uid: string) {\r\n    this.children = [];\r\n    const q = query(collection(getFirestore(), `CIM/${uid}/Children`), orderBy('chapitre'));\r\n    const querySnapshot = await getDocs(q);\r\n    await querySnapshot.forEach((document) => {\r\n      this.children.push([document.id, document.data()]);\r\n    });\r\n    this.appService.dismissLoading();\r\n  }\r\n\r\n  public async addRemede(data: any) {\r\n    if (this.cim && this.child){\r\n      data.value.cim = this.cim;\r\n      data.value.child = this.child;\r\n    }\r\n    const cim = data.value.cim;\r\n    const child = data.value.child;\r\n    const imageInput = document.getElementById('imageInput');\r\n    const audioInput = document.getElementById('audioInput');\r\n    const image = imageInput['files'][0];\r\n    const audio = audioInput['files'][0];\r\n    console.log('Data : ', data.value);\r\n    if (\r\n      data.value.cim &&\r\n      data.value.child &&\r\n      data.value.nom &&\r\n      data.value.description &&\r\n      image && audio) {\r\n      this.appService.presentLoadingDefault('Ajout du remède en cours, veuillez patienter...');\r\n\r\n      const imagePath = `Pharmacopees/${getAuth().currentUser.uid}/Files/images/${image.name}`;\r\n      const newImageRef = ref(getStorage(), imagePath);\r\n      const imageSnapshot = await uploadBytesResumable(newImageRef, image);\r\n      const publicImageUrl = await getDownloadURL(newImageRef);\r\n\r\n      const audioPath = `Pharmacopees/${getAuth().currentUser.uid}/Files/audio/${audio.name}`;\r\n      const newAudioRef = ref(getStorage(), audioPath);\r\n      const audioSnapshot = await uploadBytesResumable(newAudioRef, audio);\r\n      const publicAudioUrl = await getDownloadURL(newAudioRef);\r\n\r\n      const pharma = await this.pharmaService.getPharma(getAuth().currentUser.uid);\r\n\r\n      const docRef = await addDoc(collection(getFirestore(), 'Remedes'),\r\n        {\r\n          pharmacopee: getAuth().currentUser.uid,\r\n          cim: cim,\r\n          children: child,\r\n          nom: data.value.nom,\r\n          description: data.value.description,\r\n          state: 'activated',\r\n          likes: [],\r\n          dislikes: [],\r\n          created: serverTimestamp(),\r\n          image: publicImageUrl,\r\n          audio: publicAudioUrl,\r\n          pharmaName: pharma.get('nom')\r\n        }\r\n      );\r\n\r\n      await setDoc(doc(getFirestore(), `Pharmacopees/${getAuth().currentUser.uid}/Remedes/${docRef.id}`),\r\n        {\r\n          cim: cim,\r\n          children: child,\r\n          created: serverTimestamp()\r\n        }\r\n      );\r\n      data.reset();\r\n      this.appService.dismissLoading();\r\n      this.appService.presentToast('Remèdes ajouté avec succèss', 'light');\r\n    } else {\r\n      this.appService.presentToast('Veuillez renseigner correctement tous champs', 'danger');\r\n    }\r\n  }\r\n\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}