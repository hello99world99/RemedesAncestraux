{"version":3,"file":"src_app_tab1_tab1_module_ts.js","mappings":"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","sources":["./src/app/tab1/tab1.page.html","./src/app/services/pharma-service.service.ts","./src/app/tab1/tab1-routing.module.ts","./src/app/tab1/tab1.module.ts","./src/app/tab1/tab1.page.ts"],"sourcesContent":["export default \"<ion-header class=\\\"ion-no-border\\\">\\r\\n  <ion-toolbar color=\\\"cgreen\\\"class=\\\"bg_transp\\\" lines=\\\"none\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button routerLink=\\\"/\\\">\\r\\n        <ion-icon name=\\\"caret-back-outline\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-text>\\r\\n      <ion-label size=\\\"medium\\\" *ngIf=\\\"pharma\\\">{{ pharma.nom }}</ion-label>\\r\\n    </ion-text>\\r\\n  </ion-toolbar>\\r\\n  <ion-item color=\\\"cgreen\\\" lines=\\\"none\\\">\\r\\n    <ion-searchbar color=\\\"light\\\" showCancelButton=\\\"focus\\\" cancelButtonText=\\\"Annuler\\\" placeholder=\\\"Rechercher...\\\" animated></ion-searchbar>\\r\\n  </ion-item>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n\\r\\n  <ion-card *ngIf=\\\"pharma\\\" class=\\\"ion-padding bg_transp\\\">\\r\\n    <ion-button class=\\\"ion-margin\\\" color=\\\"cgreen\\\" expand=\\\"block\\\" (click)=\\\"addRemede()\\\">\\r\\n      <ion-icon name=\\\"add\\\"></ion-icon>\\r\\n      <span>Ajouter une remède</span>\\r\\n    </ion-button>\\r\\n    <ion-grid>\\r\\n      <ion-row>\\r\\n        <ion-col color=\\\"lgreen\\\" *ngFor=\\\"let remedy of remedies\\\" size=\\\"6\\\" class=\\\"ion-align-self-start\\\">\\r\\n          <ion-card-subtitle class=\\\"ion-text-center\\\">{{ remedy[1]?.nom }}</ion-card-subtitle>\\r\\n          <img src=\\\"{{ remedy[1].image }}\\\">\\r\\n          <ion-button color=\\\"cgreen\\\">\\r\\n            <ion-icon name=\\\"create-outline\\\"></ion-icon>\\r\\n            <span>modifier</span>\\r\\n          </ion-button>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n    </ion-grid>\\r\\n  </ion-card>\\r\\n\\r\\n  <ion-card class=\\\"container\\\" class=\\\"ion-padding\\\" *ngIf=\\\"!pharma\\\">\\r\\n    <span>Aucune pharmacopée trouvée à votre compte</span>\\r\\n    <ion-button color=\\\"cgreen\\\" (click)=\\\"installPharma()\\\" expand=\\\"block\\\">\\r\\n      <ion-icon name=\\\"add\\\"></ion-icon>\\r\\n      <span>installer une pharmacopée</span>\\r\\n    </ion-button>\\r\\n  </ion-card>\\r\\n\\r\\n</ion-content>\\r\\n\";","import { Injectable } from '@angular/core';\r\nimport { collection, doc, DocumentData, getDoc, getDocs, getFirestore, query } from 'firebase/firestore';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PharmaServiceService {\r\n\r\n  constructor() { }\r\n\r\n  public async getPharma(uid: string) {\r\n    const docRef = await getDoc(doc(getFirestore(), `Pharmacopees/${uid}`));\r\n    return await docRef;\r\n  }\r\n\r\n  public async getOwnerInfos(uid: string) {\r\n    const docRef = await getDoc(doc(getFirestore(), `Users/${uid}`));\r\n    return await docRef;\r\n  }\r\n\r\n  public async getRemedes(uid: string) {\r\n    const q = query(collection(getFirestore(), `Pharmacopees/${uid}/Remedes`));\r\n    const docRef = await getDocs(q);\r\n    return await docRef;\r\n  }\r\n\r\n  public async getRemedesFromCIM(uid: string, remedeRef: DocumentData) {\r\n    const docRef = await getDoc(doc(getFirestore(), `CIM/${remedeRef.cim}/Children/${remedeRef.children}/Remedes/${uid}`));\r\n    return await docRef;\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { Tab1Page } from './tab1.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab1Page,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class Tab1PageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Tab1Page } from './tab1.page';\nimport { ExploreContainerComponentModule } from '../explore-container/explore-container.module';\n\nimport { Tab1PageRoutingModule } from './tab1-routing.module';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ExploreContainerComponentModule,\n    Tab1PageRoutingModule\n  ],\n  declarations: [Tab1Page]\n})\nexport class Tab1PageModule {}\n","import { Component } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { LoadingController } from '@ionic/angular';\r\nimport { getAuth, User } from 'firebase/auth';\r\nimport { doc, DocumentData, getDoc, getFirestore } from 'firebase/firestore';\r\nimport { PharmaServiceService } from '../services/pharma-service.service';\r\n\r\n@Component({\r\n  selector: 'app-tab1',\r\n  templateUrl: 'tab1.page.html',\r\n  styleUrls: ['tab1.page.scss']\r\n})\r\nexport class Tab1Page {\r\n\r\n  public pharma: any;\r\n  public remedies: DocumentData[] = [];\r\n  public currentUser: User = getAuth().currentUser;\r\n  private loading: any;\r\n  constructor(\r\n    public loadingCtrl: LoadingController,\r\n    private router: Router,\r\n    private pharmaService: PharmaServiceService\r\n  ) {\r\n    this.presentLoadingDefault();\r\n    this.getPharma();\r\n    this.getAllRemedes();\r\n  }\r\n\r\n  public installPharma() {\r\n    this.router.navigateByUrl('/sign-up-pharma');\r\n  }\r\n\r\n  public async presentLoadingDefault() {\r\n    this.loading = await this.loadingCtrl.create({\r\n      message: '<span>Veuillez patienter...</span>',\r\n    });\r\n    await this.loading.present();\r\n  }\r\n\r\n  public async getPharma() {\r\n    const pharmaRef = this.pharmaService.getPharma(this.currentUser.uid);\r\n    this.pharma = (await pharmaRef).data();\r\n    this.loading.dismiss();\r\n  }\r\n\r\n  public async getAllRemedes() {\r\n    const remedesRef = this.pharmaService.getRemedes(this.currentUser.uid);\r\n    (await remedesRef).forEach(async (data) => {\r\n      const result = this.pharmaService.getRemedesFromCIM(data.id, data.data());\r\n      this.remedies.push([(await result).id, (await result).data()]);\r\n    });\r\n  }\r\n\r\n  public addRemede() {\r\n    this.router.navigateByUrl('/remedes');\r\n  }\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}