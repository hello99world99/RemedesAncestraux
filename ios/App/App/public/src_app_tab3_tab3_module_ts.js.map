{"version":3,"file":"src_app_tab3_tab3_module_ts.js","mappings":"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","sources":["./src/app/tab3/tab3.page.html","./src/app/tab3/tab3-routing.module.ts","./src/app/tab3/tab3.module.ts","./src/app/tab3/tab3.page.ts"],"sourcesContent":["export default \"<ion-header class=\\\"ion-no-border\\\">\\r\\n  <ion-toolbar color=\\\"cgreen\\\" class=\\\"bg_transp\\\" lines=\\\"none\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button color=\\\"light\\\" routerLink=\\\"/\\\">\\r\\n        <ion-icon name=\\\"caret-back-outline\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title color=\\\"light\\\">{{ pharma$?.get('nom') }}</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-card color=\\\"light\\\" class=\\\"ion-margin\\\">\\r\\n    <form class=\\\"container\\\" #data=\\\"ngForm\\\" (ngSubmit)=\\\"updatePharma(data)\\\">\\r\\n      <ion-item class=\\\"bg_transp\\\">\\r\\n        <ion-label color=\\\"cgreen\\\" position=\\\"floating\\\">Nom de la pharmacopée</ion-label>\\r\\n        <ion-input name=\\\"nom\\\" placeholder=\\\"Nom de la pharmacopée\\\" maxlength=\\\"24\\\" [value]=\\\"pharma$?.get('nom')\\\" ngModel\\r\\n          required></ion-input>\\r\\n      </ion-item>\\r\\n      <ion-item class=\\\"bg_transp\\\">\\r\\n        <ion-label color=\\\"cgreen\\\" position=\\\"floating\\\">Adresse</ion-label>\\r\\n        <ion-input type=\\\"text\\\" name=\\\"adresse\\\" placeholder=\\\"Adresse\\\" maxlength=\\\"19\\\" [value]=\\\"pharma$?.get('adresse')\\\"\\r\\n          ngModel required></ion-input>\\r\\n      </ion-item>\\r\\n      <ion-item class=\\\"bg_transp\\\">\\r\\n        <ion-label color=\\\"cgreen\\\" position=\\\"floating\\\">Numéro de téléphone</ion-label>\\r\\n        <ion-input type=\\\"tel\\\" name=\\\"telephone\\\" placeholder=\\\"Ex : +223 00 11 22 33\\\" [value]=\\\"pharma$?.get('telephone')\\\"\\r\\n          maxlength=\\\"19\\\" ngModel required></ion-input>\\r\\n      </ion-item>\\r\\n      <ion-item class=\\\"bg_transp\\\">\\r\\n        <ion-label color=\\\"cgreen\\\" position=\\\"floating\\\">Email</ion-label>\\r\\n        <ion-input type=\\\"email\\\" name=\\\"email\\\" placeholder=\\\"Ex : johndoe@gmail.com\\\" maxlength=\\\"24\\\"\\r\\n          [value]=\\\"pharma$?.get('email')\\\" ngModel required></ion-input>\\r\\n      </ion-item>\\r\\n      <ion-card *ngIf=\\\"pharma$\\\">\\r\\n        <img [src]=\\\"pharma$?.get('image')\\\" />\\r\\n      </ion-card>\\r\\n      <ion-item class=\\\"ion-hide\\\">\\r\\n        <input id=\\\"imageInput\\\" class=\\\"ion-hide\\\" type=\\\"file\\\" accept=\\\"image/jpeg, image/png\\\"/>\\r\\n      </ion-item>\\r\\n      <ion-button class=\\\"ion-margin\\\" (click)=\\\"chooseImage()\\\" expand=\\\"block\\\" color=\\\"cgreen\\\">\\r\\n        <ion-icon name=\\\"camera\\\" class=\\\"ion-margin\\\"></ion-icon>\\r\\n        photo\\r\\n      </ion-button>\\r\\n      <ion-button class=\\\"ion-margin\\\" expand=\\\"block\\\" color=\\\"cgreen\\\" type=\\\"submit\\\">\\r\\n        <ion-icon name=\\\"save\\\"></ion-icon>\\r\\n        <span class=\\\"ion-margin\\\">mettre à jour</span>\\r\\n      </ion-button>\\r\\n    </form>\\r\\n  </ion-card>\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { Tab3Page } from './tab3.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab3Page,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class Tab3PageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Tab3Page } from './tab3.page';\nimport { ExploreContainerComponentModule } from '../explore-container/explore-container.module';\n\nimport { Tab3PageRoutingModule } from './tab3-routing.module';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ExploreContainerComponentModule,\n    RouterModule.forChild([{ path: '', component: Tab3Page }]),\n    Tab3PageRoutingModule,\n  ],\n  declarations: [Tab3Page]\n})\nexport class Tab3PageModule {}\n","/* eslint-disable @typescript-eslint/dot-notation */\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { getAuth } from 'firebase/auth';\r\nimport { doc, getFirestore, serverTimestamp, updateDoc } from 'firebase/firestore';\r\nimport { getDownloadURL, getStorage, ref, uploadBytesResumable } from 'firebase/storage';\r\nimport { DocumentData } from 'rxfire/firestore/interfaces';\r\nimport { PharmaServiceService } from '../services/pharma-service.service';\r\nimport { RemedeServiceService } from '../services/remede-service.service';\r\n\r\n@Component({\r\n  selector: 'app-tab3',\r\n  templateUrl: 'tab3.page.html',\r\n  styleUrls: ['tab3.page.scss']\r\n})\r\nexport class Tab3Page implements OnInit {\r\n\r\n  public pharma$: DocumentData;\r\n  constructor(\r\n    private appService: RemedeServiceService,\r\n    private pharmaService: PharmaServiceService\r\n  ) {}\r\n\r\n  public async ngOnInit(){\r\n    await this.getPharma();\r\n  }\r\n\r\n  public async getPharma() {\r\n    this.pharma$ = await this.pharmaService.getPharma(getAuth().currentUser.uid);\r\n  }\r\n\r\n  public chooseImage(){\r\n    const imageInput = document.getElementById('imageInput');\r\n    imageInput.click();\r\n    imageInput.addEventListener('change', (e) => {\r\n      this.updateImage(e.target['files'][0]);\r\n    });\r\n  }\r\n\r\n  public async updateImage(image: File){\r\n    this.appService.presentLoadingDefault('En cours de chargement, veuillez patienter...');\r\n    const imagePath = `Files/images/cim/${image.name}`;\r\n    const newImageRef = ref(getStorage(), imagePath);\r\n    const imageSnapshot = await uploadBytesResumable(newImageRef, image);\r\n    const publicImageUrl = await getDownloadURL(newImageRef);\r\n    await updateDoc(doc(getFirestore(), `Pharmacopees/${this.pharma$?.id}`),\r\n      {\r\n        image: publicImageUrl,\r\n      }\r\n    );\r\n    await this.getPharma();\r\n    await this.appService.dismissLoading();\r\n  }\r\n\r\n  public async updatePharma(data: any) {\r\n    console.log(data.value);\r\n    if (data.valid) {\r\n      await updateDoc(doc(getFirestore(), `Pharmacopees/${this.pharma$?.id}`), data.value);\r\n      this.getPharma();\r\n      await this.appService.presentToast('<b>Mise en jour de la pharmacopée ajoutée avec succèss...</b>', 'light');\r\n    }else{\r\n      this.appService.presentToast('<b>Veuillez renseigner correctement tous les champs...</b>', 'danger');\r\n    }\r\n  }\r\n\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}