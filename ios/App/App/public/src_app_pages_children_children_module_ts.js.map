{"version":3,"file":"src_app_pages_children_children_module_ts.js","mappings":"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","sources":["./src/app/pages/children/children.page.html","./src/app/pages/children/children-routing.module.ts","./src/app/pages/children/children.module.ts","./src/app/pages/children/children.page.ts","./src/app/pipes/count.pipe.ts"],"sourcesContent":["export default \"<ion-header style=\\\"background-image: url({{document[1].image}}); background-size: cover;\\\" class=\\\"ion-no-border bg_trans\\\">\\r\\n\\r\\n  <ion-toolbar class=\\\"bg_transp\\\" lines=\\\"none\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button defaultHref=\\\"\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n  <ion-item class=\\\"bg_transp\\\" lines=\\\"none\\\"></ion-item>\\r\\n  <ion-item class=\\\"ion-text-center bg_transp bg_trans ion-no-padding\\\" lines=\\\"none\\\">\\r\\n    <ion-text class=\\\"text-bold bg_transp\\\">{{ document[1].title }}</ion-text>\\r\\n  </ion-item>\\r\\n  <ion-card class=\\\"ion-text-center bg_transp bg_trans ion-no-padding\\\">\\r\\n    <audio controls src=\\\"{{ document[1]?.audio }}\\\"></audio>\\r\\n  </ion-card>\\r\\n\\r\\n</ion-header>\\r\\n\\r\\n<ion-content color=\\\"#333\\\">\\r\\n\\r\\n  <ion-grid>\\r\\n    <ion-row>\\r\\n      <ion-col class=\\\"ion-margin\\\" size=\\\"11\\\" *ngFor=\\\"let child of children\\\">\\r\\n\\r\\n        <ion-card button=\\\"true\\\" color=\\\"lgreen\\\" class=\\\"ion-no-padding\\\" (click)=\\\"showDetails(child[0])\\\">\\r\\n          <ion-card-content class=\\\"ion-no-margin\\\">\\r\\n            <img class=\\\"children-image\\\" src=\\\"{{ child[1].image }}\\\" />\\r\\n          </ion-card-content>\\r\\n          <ion-card-title class=\\\"ion-text-center\\\" size=\\\"small\\\">{{ child[1].title }}</ion-card-title>\\r\\n          <ion-card-subtitle class=\\\"ion-text-center ion-margin\\\">{{ child[0] | count: remedesCount }} remèdes proposés</ion-card-subtitle>\\r\\n        </ion-card>\\r\\n\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n  </ion-grid>\\r\\n\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { ChildrenPage } from './children.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ChildrenPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ChildrenPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { ChildrenPageRoutingModule } from './children-routing.module';\r\nimport { ChildrenPage } from './children.page';\r\nimport { CountPipe } from 'src/app/pipes/count.pipe';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ChildrenPageRoutingModule\r\n  ],\r\n  declarations: [ChildrenPage, CountPipe]\r\n})\r\nexport class ChildrenPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { RemedeServiceService } from 'src/app/services/remede-service.service';\r\nimport { collection, getDocs, getFirestore, query, orderBy, where } from 'firebase/firestore';\r\nimport { LoadingController } from '@ionic/angular';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-children',\r\n  templateUrl: './children.page.html',\r\n  styleUrls: ['./children.page.scss'],\r\n})\r\nexport class ChildrenPage implements OnInit {\r\n\r\n  public children: any[] = [];\r\n  public remedesCount: any[] = [];\r\n  public document: any;\r\n  private db = getFirestore();\r\n  private loading: any;\r\n  constructor(\r\n    private appService: RemedeServiceService,\r\n    private loadingCtrl: LoadingController,\r\n    private router: Router\r\n  ) {\r\n    this.presentLoadingDefault();\r\n    this.document = this.appService.getDocument();\r\n    this.getChildren();\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  public async getChildren(){\r\n    const q = query(collection(this.db, 'CIM/'+this.document[0]+'/Children'), where('state', '==', 'activated'), orderBy('chapitre'));\r\n    const querySnapshot = await getDocs(q);\r\n    await querySnapshot.forEach((document) => {\r\n      this.children.push([document.id, document.data()]);\r\n    });\r\n\r\n    this.children.forEach(async (child) => {\r\n      const r = query(collection(this.db, 'CIM/'+this.document[0]+'/Children/'+child[0]+'/Remedes'));\r\n      const remedeSnapshot = await getDocs(r);\r\n      await remedeSnapshot.forEach((document) => {\r\n        this.remedesCount.push();\r\n      });\r\n    });\r\n    console.log(this.remedesCount);\r\n    this.loading.dismiss();\r\n  }\r\n\r\n  public showDetails(uid: string) {\r\n    const path = 'CIM/'+this.document[0]+'/Children/'+uid;\r\n    this.appService.setPath(path);\r\n    this.router.navigateByUrl('/details');\r\n  }\r\n\r\n  public async presentLoadingDefault() {\r\n    this.loading = await this.loadingCtrl.create({\r\n      message: '<span>Veuillez patienter...</span>',\r\n    });\r\n    await this.loading.present();\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n  name: 'count'\r\n})\r\nexport class CountPipe implements PipeTransform {\r\n\r\n  transform(value: string, list: string[]): number {\r\n    let count = 0;\r\n    for (const element of list) {\r\n      console.log('element : ', element);\r\n      if (element === value){\r\n        count += 1;\r\n      }\r\n    }\r\n    console.log('Counter : ', count);\r\n    return count;\r\n  }\r\n\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}