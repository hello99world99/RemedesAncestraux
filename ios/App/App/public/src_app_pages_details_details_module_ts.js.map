{"version":3,"file":"src_app_pages_details_details_module_ts.js","mappings":";;;;;;;;;;;;;AAAA,iEAAe,2DAA2D,gBAAgB,GAAG,uBAAuB,yYAAyY,iBAAiB,uTAAuT,uBAAuB,sZAAsZ,sBAAsB,wUAAwU,4BAA4B,kEAAkE,0CAA0C,6MAA6M,UAAU,gdAAgd,+BAA+B,2kBAA2kB,kCAAkC,k6CAAk6C;;;;;;;;;;;;;;;;;;;ACAp4I;AACc;AAEV;AAE7C,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,sDAAW;KACvB;CACF,CAAC;IAMW,wBAAwB,SAAxB,wBAAwB;CAAG;AAA3B,wBAAwB;IAJpC,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,wBAAwB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;AChBI;AACM;AACF;AACC;AACD;AAEuB;AACvB;IAYhC,iBAAiB,SAAjB,iBAAiB;CAAG;AAApB,iBAAiB;IAV7B,uDAAQ,CAAC;QACR,OAAO,EAAE;YACP,yDAAY;YACZ,uDAAW;YACX,uDAAW;YACX,6EAAwB;YACxB,wDAAY;SACb;QACD,YAAY,EAAE,CAAC,sDAAW,CAAC;KAC5B,CAAC;GACW,iBAAiB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnB9B,qCAAqC;AACrC,oDAAoD;AACF;AACO;AACR;AACT;AAC4D;AACrB;AACA;AAChB;AAE/D,kDAAc,CAAC,CAAC,8CAAU,CAAC,CAAC,CAAC;IAOhB,WAAW,SAAX,WAAW;IAatB,YACU,UAAgC,EAChC,aAAmC,EACnC,MAAc,EACd,WAA2B,EAC3B,eAAgC;QAJhC,eAAU,GAAV,UAAU,CAAsB;QAChC,kBAAa,GAAb,aAAa,CAAsB;QACnC,WAAM,GAAN,MAAM,CAAQ;QACd,gBAAW,GAAX,WAAW,CAAgB;QAC3B,oBAAe,GAAf,eAAe,CAAiB;QAjBnC,WAAM,GAAkB;YAC7B,aAAa,EAAE,CAAC;YAChB,YAAY,EAAE,CAAC;YACf,UAAU,EAAE,IAAI;YAChB,UAAU,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE;YAC/B,SAAS,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE;SAC/B,CAAC;QAEK,YAAO,GAA0C,EAAE,CAAC;IAUvD,CAAC;IAEL,QAAQ;QACN,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACzD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC7D,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,WAAW,GAAG,sDAAO,EAAE,CAAC,WAAW,CAAC;IAC3C,CAAC;IAEY,UAAU;;YACrB,MAAM,MAAM,GAAG,uDAAG,CAAC,gEAAY,EAAE,EAAE,OAAO,IAAI,CAAC,GAAG,aAAa,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;YAC7E,MAAM,OAAO,GAAG,MAAM,0DAAM,CAAC,MAAM,CAAC,CAAC;YACrC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,IAAI,EAAE,CAAC;QAChC,CAAC;KAAA;IAEY,SAAS;;YACpB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;YAClB,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,kBAAkB,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;YACjF,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,EAAE;gBAC3B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC1B,CAAC,CAAC,CAAC;QACL,CAAC;KAAA;IAEM,UAAU,CAAC,GAAW;QAC3B,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,eAAe,EAAE;gBACrC,GAAG,EAAE,GAAG;aACT,CAAC,CAAC,CAAC;IACN,CAAC;IAEM,YAAY,CAAC,KAAY;QAC9B,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;QACjD,MAAM,CAAC,OAAO,CAAC,CAAC,MAAM,GAAG,GAAG,GAAG,GAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,SAAS,IAAI,CAAC;IAChE,CAAC;IAEM,IAAI,CAAC,IAAkB;QAC5B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,EAAE;YACzC,IAAI,CAAC,SAAS,EAAE,CAAC;QACnB,CAAC,CAAC,CAAC;IACL,CAAC;IAEM,OAAO,CAAC,IAAkB;QAC/B,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,EAAE;YAC5C,IAAI,CAAC,SAAS,EAAE,CAAC;QACnB,CAAC,CAAC,CAAC;IACL,CAAC;IAEM,OAAO,CAAC,GAAW;QACxB,OAAO,CAAC,GAAG,CAAC,YAAY,GAAG,GAAG,CAAC,CAAC;IAClC,CAAC;IAED;;;;OAIG;IACK,aAAa,CAAC,MAAoB;QACxC,IAAI,CAAC,aAAa,CAAC,mBAAmB,CAAC,MAAM,CAAC,CAAC;QAC/C,IAAI,CAAC,SAAS,EAAE,CAAC;IACnB,CAAC;IAEY,kBAAkB,CAAC,MAAoB;;YAClD,MAAM,IAAI,CAAC,aAAa,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC;YAC1D,IAAI,CAAC,SAAS,EAAE,CAAC;QACnB,CAAC;KAAA;IAEY,OAAO,CAAC,MAAoB;;YACvC,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QACtC,CAAC;KAAA;IAEY,SAAS;;YACpB,MAAM,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;YAClE,IAAI,CAAC,MAAM,MAAM,CAAC,CAAC,MAAM,EAAE,EAAC;gBAC1B,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,SAAS,EAAE;wBAC/B,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;qBAC5C,CAAC,CAAC,CAAC;aACL;iBAAI;gBACH,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;oBAC9C,QAAQ,EAAE,QAAQ;oBAClB,MAAM,EAAE,4BAA4B;oBACpC,OAAO,EAAE,yFAAyF;oBAClG,OAAO,EAAE;wBACP;4BACE,IAAI,EAAE,SAAS;4BACf,IAAI,EAAE,QAAQ;4BACd,QAAQ,EAAE,UAAU;4BACpB,OAAO,EAAE,CAAC,IAAI,EAAE,EAAE,GAAE,CAAC;yBACtB,EAAE;4BACD,IAAI,EAAE,OAAO;4BACb,OAAO,EAAE,GAAG,EAAE;gCACZ,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,iBAAiB,CAAC,CAAC;4BAC/C,CAAC;yBACF;qBACF;iBACF,CAAC,CAAC;gBACH,KAAK,CAAC,OAAO,EAAE,CAAC;aACjB;QACH,CAAC;KAAA;CAEF;;YAhIQ,yFAAoB;YADpB,yFAAoB;YAJpB,mDAAM;YAAE,2DAAc;YACtB,2DAAe;;AAcX,WAAW;IANvB,yDAAS,CAAC;QACT,QAAQ,EAAE,aAAa;QACvB,uMAAkC;;KAEnC,CAAC;GAEW,WAAW,CAsHvB;AAtHuB","sources":["./src/app/pages/details/details.page.html","./src/app/pages/details/details-routing.module.ts","./src/app/pages/details/details.module.ts","./src/app/pages/details/details.page.ts"],"sourcesContent":["export default \"<ion-header id=\\\"header\\\" style=\\\"background-image: url({{details?.image}}); background-size: cover;\\\"\\r\\n  class=\\\"ion-no-border bg_trans\\\">\\r\\n  <ion-toolbar class=\\\"bg_transp\\\" lines=\\\"none\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button color=\\\"light\\\" defaultHref=\\\"\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n  <ion-item class=\\\"ion-text-center bg_transp bg_trans ion-no-padding\\\" lines=\\\"none\\\">\\r\\n    <ion-text class=\\\"text-bold bg_transp\\\">{{ details?.title }}</ion-text>\\r\\n  </ion-item>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content [scrollEvents]=\\\"true\\\" (ionScroll)=\\\"logScrolling($event)\\\">\\r\\n  <ion-card class=\\\"ion-margin\\\">\\r\\n    <ion-card-content class=\\\"ion-no-margin ion-no-padding\\\">\\r\\n      <ion-label class=\\\"ion-no-margin ion-padding\\\">\\r\\n        <ion-text>{{ details?.description }}</ion-text>\\r\\n      </ion-label>\\r\\n      <audio class=\\\"player\\\" controls [src]=\\\"details?.audio\\\">\\r\\n      </audio>\\r\\n    </ion-card-content>\\r\\n  </ion-card>\\r\\n\\r\\n  <swiper class=\\\"ion-margin\\\" [config]=\\\"config\\\">\\r\\n    <ng-template swiperSlide *ngFor=\\\"let remede of remedes\\\">\\r\\n      <ion-card class=\\\"ion-padding ion-margin\\\">\\r\\n        <ion-card-header>\\r\\n          <ion-card-subtitle>{{ remede?.data()?.nom }}</ion-card-subtitle>\\r\\n        </ion-card-header>\\r\\n        <ion-card-content button=\\\"true\\\">\\r\\n          <ion-img class=\\\"ion-no-margin\\\" [src]=\\\"remede?.get('image')\\\"></ion-img>\\r\\n          <audio class=\\\"player\\\" controls [src]=\\\"remede?.get('audio')\\\"></audio>\\r\\n          <ion-card-subtitle>\\r\\n            <p><b>{{ remede?.get('pharmaName') }}</b></p>\\r\\n            <ion-text>\\r\\n              <ion-label>{{ remede?.get('created')?.toDate() | date }}</ion-label>\\r\\n            </ion-text>\\r\\n          </ion-card-subtitle>\\r\\n        </ion-card-content>\\r\\n        <ion-buttons>\\r\\n\\r\\n          <!-- LIke a remedy -->\\r\\n          <ion-button color=\\\"{{'cgreen'}}\\\" (click)=\\\"like(remede)\\\"\\r\\n            *ngIf=\\\"(remede?.get('likes'))?.includes(currentUser?.uid)===true\\\">\\r\\n            <ion-icon name=\\\"heart-circle-outline\\\"></ion-icon>\\r\\n          </ion-button>\\r\\n          <ion-button (click)=\\\"like(remede)\\\" *ngIf=\\\"(remede?.get('likes'))?.includes(currentUser?.uid)===false\\\">\\r\\n            <ion-icon name=\\\"heart-circle-outline\\\"></ion-icon>\\r\\n          </ion-button>\\r\\n          <ion-badge color=\\\"cgreen\\\">{{ remede?.get('likes')?.length }}</ion-badge>\\r\\n\\r\\n          <!-- Dislike a remedy -->\\r\\n          <ion-button color=\\\"cgreen\\\" (click)=\\\"dislike(remede)\\\"\\r\\n            *ngIf=\\\"(remede?.get('dislikes'))?.includes(currentUser?.uid)===true\\\">\\r\\n            <ion-icon name=\\\"heart-dislike-circle-outline\\\"></ion-icon>\\r\\n          </ion-button>\\r\\n          <ion-button (click)=\\\"dislike(remede)\\\" *ngIf=\\\"(remede?.get('dislikes'))?.includes(currentUser?.uid)===false\\\">\\r\\n            <ion-icon name=\\\"heart-dislike-circle-outline\\\"></ion-icon>\\r\\n          </ion-button>\\r\\n          <ion-badge color=\\\"cgreen\\\">{{ remede?.get('dislikes')?.length }}</ion-badge>\\r\\n\\r\\n          <!-- Comment a remedy -->\\r\\n          <ion-button (click)=\\\"comment(remede?.id)\\\">\\r\\n            <ion-icon name=\\\"chatbox-ellipses-outline\\\"></ion-icon>\\r\\n          </ion-button>\\r\\n\\r\\n          <!-- Bookmarks -->\\r\\n          <ion-button (click)=\\\"removeFromBookmark(remede)\\\"\\r\\n            *ngIf=\\\"remede?.get('bookmarks')?.includes(currentUser?.uid)===true\\\">\\r\\n            <ion-icon color=\\\"cgreen\\\" name=\\\"bookmark-outline\\\"></ion-icon>\\r\\n          </ion-button>\\r\\n          <ion-button (click)=\\\"addToBookmark(remede)\\\"\\r\\n            *ngIf=\\\"remede?.get('bookmarks')?.includes(currentUser?.uid)===false\\\">\\r\\n            <ion-icon name=\\\"bookmark-outline\\\"></ion-icon>\\r\\n          </ion-button>\\r\\n\\r\\n          <!-- Share remedy via other app-->\\r\\n          <ion-button (click)=\\\"shareIt(remede)\\\">\\r\\n            <ion-icon name=\\\"share-social\\\"></ion-icon>\\r\\n          </ion-button>\\r\\n        </ion-buttons>\\r\\n        <ion-button color=\\\"cgreen\\\" (click)=\\\"showRemede(remede?.id)\\\">\\r\\n          <ion-icon name=\\\"eye\\\"></ion-icon>\\r\\n          <span class=\\\"ion-margin\\\">voir plus</span>\\r\\n        </ion-button>\\r\\n      </ion-card>\\r\\n    </ng-template>\\r\\n  </swiper>\\r\\n  <ion-button class=\\\"ion-margin\\\" color=\\\"cgreen\\\" expand=\\\"block\\\" (click)=\\\"addRemede()\\\">\\r\\n    <ion-icon name=\\\"add\\\"></ion-icon>\\r\\n    <span>Ajouter une remède</span>\\r\\n  </ion-button>\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { DetailsPage } from './details.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DetailsPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class DetailsPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { SwiperModule } from 'swiper/angular';\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { DetailsPageRoutingModule } from './details-routing.module';\r\nimport { DetailsPage } from './details.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    DetailsPageRoutingModule,\r\n    SwiperModule,\r\n  ],\r\n  declarations: [DetailsPage]\r\n})\r\nexport class DetailsPageModule {}\r\n","/* eslint-disable object-shorthand */\r\n/* eslint-disable @typescript-eslint/dot-notation */\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { AlertController } from '@ionic/angular';\r\nimport { getAuth } from 'firebase/auth';\r\nimport { doc, DocumentData, getDoc, getFirestore, QueryDocumentSnapshot } from 'firebase/firestore';\r\nimport { PharmaServiceService } from 'src/app/services/pharma-service.service';\r\nimport { RemedeServiceService } from 'src/app/services/remede-service.service';\r\nimport SwiperCore, { SwiperOptions, Navigation } from 'swiper';\r\n\r\nSwiperCore.use([Navigation]);\r\n@Component({\r\n  selector: 'app-details',\r\n  templateUrl: './details.page.html',\r\n  styleUrls: ['./details.page.scss'],\r\n})\r\n\r\nexport class DetailsPage implements OnInit {\r\n  public config: SwiperOptions = {\r\n    slidesPerView: 1,\r\n    spaceBetween: 8,\r\n    navigation: true,\r\n    pagination: { clickable: true },\r\n    scrollbar: { draggable: true },\r\n  };\r\n  public details: any;\r\n  public remedes: QueryDocumentSnapshot<DocumentData>[] = [];\r\n  public currentUser: any;\r\n  private cim: string;\r\n  private child: string;\r\n  constructor(\r\n    private appService: RemedeServiceService,\r\n    private pharmaService: PharmaServiceService,\r\n    private router: Router,\r\n    private activeRoute: ActivatedRoute,\r\n    private alertController: AlertController\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.cim = this.activeRoute.snapshot.paramMap.get('cim');\r\n    this.child = this.activeRoute.snapshot.paramMap.get('child');\r\n    this.getDetails();\r\n    this.getRemede();\r\n    this.currentUser = getAuth().currentUser;\r\n  }\r\n\r\n  public async getDetails() {\r\n    const docRef = doc(getFirestore(), `CIM/${this.cim}/Children/${this.child}`);\r\n    const snapDoc = await getDoc(docRef);\r\n    this.details = snapDoc.data();\r\n  }\r\n\r\n  public async getRemede() {\r\n    this.remedes = [];\r\n    const result = await this.pharmaService.getIllnessRemedies(this.cim, this.child);\r\n    result.docs.forEach((data) => {\r\n      this.remedes.push(data);\r\n    });\r\n  }\r\n\r\n  public showRemede(uid: string){\r\n    this.router.navigate(['/remede-infos', {\r\n      uid: uid\r\n    }]);\r\n  }\r\n\r\n  public logScrolling(event: Event){\r\n    const header = document.querySelector('#header');\r\n    header['style'].height = `${201-event['detail'].scrollTop}px`;\r\n  }\r\n\r\n  public like(data: DocumentData){\r\n    this.appService.like(data).then((result) => {\r\n      this.getRemede();\r\n    });\r\n  }\r\n\r\n  public dislike(data: DocumentData){\r\n    this.appService.dislike(data).then((result) => {\r\n      this.getRemede();\r\n    });\r\n  }\r\n\r\n  public comment(uid: string){\r\n    console.log('comment : ' + uid);\r\n  }\r\n\r\n  /**\r\n   *Method to add a remedy in to favorite page\r\n   *\r\n   * @memberof RemedeInfosPage\r\n   */\r\n   public addToBookmark(remedy: DocumentData) {\r\n    this.pharmaService.addRemedyToBookmark(remedy);\r\n    this.getRemede();\r\n  }\r\n\r\n  public async removeFromBookmark(remedy: DocumentData){\r\n    await this.pharmaService.removeRemedyFromBookmark(remedy);\r\n    this.getRemede();\r\n  }\r\n\r\n  public async shareIt(remedy: DocumentData){\r\n    this.appService.shareRemedy(remedy);\r\n  }\r\n\r\n  public async addRemede(){\r\n    const pharma = this.pharmaService.getPharma(this.currentUser.uid);\r\n    if ((await pharma).exists()){\r\n      this.router.navigate(['remedes', {\r\n        ref: JSON.stringify([this.cim, this.child])\r\n      }]);\r\n    }else{\r\n      const alert = await this.alertController.create({\r\n        cssClass: 'cgreen',\r\n        header: 'Installer une pharmacopées',\r\n        message: '<strong>Aucune pharmacopée enregistrer en votre compte. Voulez-vous en créer ?</strong>',\r\n        buttons: [\r\n          {\r\n            text: 'Annuler',\r\n            role: 'cancel',\r\n            cssClass: 'warnning',\r\n            handler: (blah) => {}\r\n          }, {\r\n            text: 'Créer',\r\n            handler: () => {\r\n              this.router.navigateByUrl('/sign-up-pharma');\r\n            }\r\n          }\r\n        ]\r\n      });\r\n      alert.present();\r\n    }\r\n  }\r\n\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}